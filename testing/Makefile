TEST_BINARY=testbin
TEST_TARGET=targetbin
TEST_FOLDER=testfolder
GOBINSTAPLER=gobinstapler

.PHONY: clean
clean:
	rm -f $(TEST_BINARY) $(TEST_TARGET) $(GOBINSTAPLER)

.PHONY: $(TEST_BINARY)
$(TEST_BINARY):
	go build -o $(TEST_BINARY) .

.PHONY: $(GOBINSTAPLER)
$(GOBINSTAPLER):
	go build -o $(GOBINSTAPLER) ../.

.PHONY: $(TEST_TARGET)
$(TEST_TARGET): $(GOBINSTAPLER) $(TEST_BINARY)
	./$(GOBINSTAPLER) $(TEST_BINARY) $(TEST_TARGET) $(TEST_FOLDER)
	./$(TEST_TARGET)

.PHONY: test
test: $(TEST_TARGET) 
